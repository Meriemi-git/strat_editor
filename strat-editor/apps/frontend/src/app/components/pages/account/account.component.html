<div class="account-wrapper" *ngIf="$userInfos | async; let userInfos">
  <div *ngIf="userInfos">
    <div class="account-container">
      <h2 class="mat-h2 title">Account details</h2>

      <mat-tab-group mat-align-tabs="center">
        <mat-tab label="Overview">
          <h2>Hello {{ userInfos.username | titlecase }} !</h2>
          <span>Your mail : {{ userInfos.userMail }}</span>
          <br />
          <div *ngIf="userInfos.mailConfirmed" class="verified">
            <strat-editor-svg-icon [name]="'check'" [width]="'160px'">
            </strat-editor-svg-icon>
            Mail verified
          </div>
          <br />
          <mat-card class="confirmations" *ngIf="!userInfos.mailConfirmed">
            <h3>Mail confirmation pending</h3>
            <p>
              You need to confirm your email by clicking on the link send on
              your email address.
            </p>
            <br />
            <p class="resend">
              If you have not received the mail you can click on the button
              below to re-send the email.
            </p>
            <div *ngIf="httpError" class="error-block">
              {{ httpError.error.message }}
            </div>
            <button
              color="primary"
              mat-raised-button
              class="submit-button"
              (click)="resendEmailLink(userInfos)"
            >
              Re-send
            </button>
          </mat-card>
        </mat-tab>
        <mat-tab label="Security" class="secutity">
          <mat-accordion class="headers-align" hideToggle>
            <mat-expansion-panel expanded="true">
              <mat-expansion-panel-header>
                <mat-panel-title>Email address </mat-panel-title>

                <mat-panel-description>
                  Change your email address
                  <mat-icon>alternate_email</mat-icon>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <strat-editor-mail-changer
                [httpError]="$httpError | async"
                (mailChange)="onMailChange($event)"
              ></strat-editor-mail-changer>
              <!-- Mail changer -->
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title> Password </mat-panel-title>
                <mat-panel-description>
                  Change your password
                  <mat-icon>vpn_key</mat-icon>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <strat-editor-password-changer
                [httpError]="$httpError | async"
                (passwordChanged)="onPasswordChanged($event)"
              >
              </strat-editor-password-changer>
            </mat-expansion-panel>
          </mat-accordion>
        </mat-tab>
        <mat-tab label="CGU">Content 3</mat-tab>
      </mat-tab-group>

      <div *ngIf="!userInfos">You are not connected.</div>
    </div>
  </div>
</div>
